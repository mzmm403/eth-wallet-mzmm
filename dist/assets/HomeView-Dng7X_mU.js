import{E as L,n as U,l as H}from"./el-button-CglwzWh6.js";import{E as P,a as R}from"./el-input-eXwZFY6z.js";import{_ as F,u as M,r as _,c as O,a,w as d,b as t,i as f,d as c,e as T,o as j,f as y,p as q,g as A,h as D}from"./index-Dnt4IjWU.js";import{u as J,E as $,d as G}from"./el-loading-eOtmDN74.js";import{E as n,m as K}from"./el-message-BRBEjxOk.js";const b=g=>(q("data-v-723b135a"),g=g(),A(),g),Q={class:"container"},X={class:"homebox"},Y={class:"eyes-postion"},Z={class:"eyes"},ee=b(()=>t("div",{class:"title"},[t("h1",null,"欢迎使用m-eth钱包！"),t("p",null,"即将去进入去中心化网络")],-1)),se={class:"btnBox"},oe=b(()=>t("span",null,"导入钱包",-1)),le={class:"zhuangzhan"},te={class:"dialog-footer"},ae=b(()=>t("span",null,"创建钱包",-1)),ne={__name:"HomeView",setup(g){const k=M(),v=J();let x=_(v.isLocalNull());const z=()=>{k.push("/register")};let l=_(!1),m=_(),p=_();const w=_(!1),I=async(r,e)=>{let s=v.isLocalNull();const u=$.service({lock:!0,text:"正在登录,请稍后...",background:"rgba(0, 0, 0, 0.7)"});if(s)u.close(),n.error("还没有账号，请注册");else{let i=r;const h=await K(i),E=G.hdkey.fromMasterSeed(h).derivePath("m/44'/60'/0'/0/0").getWallet(),N=E.getAddressString(),W=await E.toV3(e);let S=JSON.parse(v.getWalletUser()),B=S[0].address,C=S[0].keyStore;N===B?C.address===W.address?(w.value=!0,u.close(),n({message:"登陆成功",type:"success"}),k.push({path:"wallet",query:{password:e,oldmnemonic:i}})):(u.close(),n.error("密码错误")):(u.close(),n.error("助记词错误"))}l.value=!1};return k.beforeEach((r,e,s)=>{r.name==="wallet"?e.name==="check"||w.value?s():(n.error("请先登录"),s({name:"home"})):r.name==="mnemonic"?e.name==="register"?s():(n.error("无效的访问路径"),s({name:"register"})):r.name==="check"?e.name==="mnemonic"?s():(n.error("无效的访问路径"),s({name:"mnemonic"})):r.name==="register"&&!x.value?(n.error("已存在账号，请登录"),s({path:"/"})):s()}),(r,e)=>{const s=T,u=D,i=L,h=R,V=P;return j(),O("div",Q,[a(s,null,{default:d(()=>[y("Home")]),_:1}),t("div",X,[t("div",Y,[t("div",Z,[a(u)])]),ee,t("div",se,[a(i,{type:"primary",size:"large",class:"btn btn-log",onClick:e[0]||(e[0]=o=>f(l)?l.value=!0:l=!0)},{default:d(()=>[oe]),_:1}),a(V,{modelValue:c(l),"onUpdate:modelValue":e[5]||(e[5]=o=>f(l)?l.value=o:l=o),title:"转账",width:"35%",center:""},{footer:d(()=>[t("span",te,[a(i,{onClick:e[3]||(e[3]=o=>I(c(m),c(p))),type:"primary"},{default:d(()=>[y("导入")]),_:1}),a(i,{onClick:e[4]||(e[4]=o=>f(l)?l.value=!1:l=!1)},{default:d(()=>[y("取消")]),_:1})])]),default:d(()=>[t("div",le,[a(h,{class:"t-input",modelValue:c(m),"onUpdate:modelValue":e[1]||(e[1]=o=>f(m)?m.value=o:m=o),placeholder:"请输入助记词","prefix-icon":c(U)},null,8,["modelValue","prefix-icon"]),a(h,{class:"t-input",modelValue:c(p),"onUpdate:modelValue":e[2]||(e[2]=o=>f(p)?p.value=o:p=o),placeholder:"请输入密码","prefix-icon":c(H),style:{"margin-top":"10px"}},null,8,["modelValue","prefix-icon"])])]),_:1},8,["modelValue"]),a(i,{type:"primary",size:"large",class:"btn btn-reg",onClick:z},{default:d(()=>[ae]),_:1})])])])}}},me=F(ne,[["__scopeId","data-v-723b135a"]]);export{me as default};
